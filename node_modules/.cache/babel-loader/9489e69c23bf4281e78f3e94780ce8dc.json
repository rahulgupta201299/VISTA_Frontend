{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport { createDB } from '../redux/user/user-actions';\nconst config = {\n  apiKey: \"AIzaSyBe-cuQxBL84yukNPdzMRj_MKnOct3rUA8\",\n  authDomain: \"vistastudentdb.firebaseapp.com\",\n  projectId: \"vistastudentdb\",\n  storageBucket: \"vistastudentdb.appspot.com\",\n  messagingSenderId: \"798980511106\",\n  appId: \"1:798980511106:web:23e3efd7422b8d82866b9b\",\n  measurementId: \"G-X7HG1EQV6J\"\n};\nexport const createUserProfileDocument = async (userAuth, username, additionalData) => {\n  if (!userAuth) return;\n  var z = auth.currentUser;\n  const userRef = firestore.doc(`${username}/${userAuth.uid}`);\n  const snapShot = await userRef.get();\n\n  if (!snapShot.exist) {\n    const {\n      displayName,\n      email\n    } = userAuth;\n    const createdAt = new Date();\n    z.sendEmailVerification();\n\n    try {\n      await userRef.set({\n        createdAt,\n        displayName,\n        email,\n        ...additionalData\n      });\n      window.location.reload();\n    } catch (error) {\n      console.log('error creating user', error.message);\n    }\n  }\n\n  return userRef;\n};\nfirebase.initializeApp(config);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport default firebase;","map":{"version":3,"sources":["D:/Web_Page/vista/Frontend/src/my_components/Firebase/FirebaseSTUD.js"],"names":["firebase","createDB","config","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserProfileDocument","userAuth","username","additionalData","z","auth","currentUser","userRef","firestore","doc","uid","snapShot","get","exist","displayName","email","createdAt","Date","sendEmailVerification","set","window","location","reload","error","console","log","message","initializeApp"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;AACA,SAASC,QAAT,QAAyB,4BAAzB;AAEA,MAAMC,MAAM,GAAC;AACTC,EAAAA,MAAM,EAAE,yCADC;AAETC,EAAAA,UAAU,EAAE,gCAFH;AAGTC,EAAAA,SAAS,EAAE,gBAHF;AAITC,EAAAA,aAAa,EAAE,4BAJN;AAKTC,EAAAA,iBAAiB,EAAE,cALV;AAMTC,EAAAA,KAAK,EAAE,2CANE;AAOTC,EAAAA,aAAa,EAAE;AAPN,CAAb;AAUA,OAAO,MAAMC,yBAAyB,GAAC,OAAOC,QAAP,EAAgBC,QAAhB,EAAyBC,cAAzB,KAA0C;AAC7E,MAAG,CAACF,QAAJ,EAAc;AACd,MAAIG,CAAC,GAACC,IAAI,CAACC,WAAX;AACA,QAAMC,OAAO,GAACC,SAAS,CAACC,GAAV,CAAe,GAAEP,QAAS,IAAGD,QAAQ,CAACS,GAAI,EAA1C,CAAd;AACA,QAAMC,QAAQ,GAAC,MAAMJ,OAAO,CAACK,GAAR,EAArB;;AACA,MAAG,CAACD,QAAQ,CAACE,KAAb,EAAmB;AACf,UAAM;AAACC,MAAAA,WAAD;AAAaC,MAAAA;AAAb,QAAoBd,QAA1B;AACA,UAAMe,SAAS,GAAC,IAAIC,IAAJ,EAAhB;AACAb,IAAAA,CAAC,CAACc,qBAAF;;AACA,QAAG;AACC,YAAMX,OAAO,CAACY,GAAR,CAAY;AACdH,QAAAA,SADc;AAEdF,QAAAA,WAFc;AAGdC,QAAAA,KAHc;AAId,WAAGZ;AAJW,OAAZ,CAAN;AAMAiB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,KARD,CASA,OAAMC,KAAN,EAAY;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkCF,KAAK,CAACG,OAAxC;AACH;AACJ;;AACD,SAAOnB,OAAP;AACH,CAvBM;AAyBPjB,QAAQ,CAACqC,aAAT,CAAuBnC,MAAvB;AACA,OAAO,MAAMa,IAAI,GAACf,QAAQ,CAACe,IAAT,EAAX;AACP,OAAO,MAAMG,SAAS,GAAClB,QAAQ,CAACkB,SAAT,EAAhB;AAEP,eAAelB,QAAf","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\nimport { createDB } from '../redux/user/user-actions'\r\n\r\nconst config={\r\n    apiKey: \"AIzaSyBe-cuQxBL84yukNPdzMRj_MKnOct3rUA8\",\r\n    authDomain: \"vistastudentdb.firebaseapp.com\",\r\n    projectId: \"vistastudentdb\",\r\n    storageBucket: \"vistastudentdb.appspot.com\",\r\n    messagingSenderId: \"798980511106\",\r\n    appId: \"1:798980511106:web:23e3efd7422b8d82866b9b\",\r\n    measurementId: \"G-X7HG1EQV6J\"\r\n}\r\n\r\nexport const createUserProfileDocument=async (userAuth,username,additionalData)=>{\r\n    if(!userAuth) return\r\n    var z=auth.currentUser\r\n    const userRef=firestore.doc(`${username}/${userAuth.uid}`)\r\n    const snapShot=await userRef.get()\r\n    if(!snapShot.exist){\r\n        const {displayName,email}=userAuth\r\n        const createdAt=new Date()\r\n        z.sendEmailVerification()\r\n        try{\r\n            await userRef.set({\r\n                createdAt,\r\n                displayName,\r\n                email,\r\n                ...additionalData\r\n            })\r\n            window.location.reload()\r\n        }\r\n        catch(error){\r\n            console.log('error creating user',error.message)\r\n        }\r\n    }\r\n    return userRef\r\n}\r\n\r\nfirebase.initializeApp(config)\r\nexport const auth=firebase.auth()\r\nexport const firestore=firebase.firestore()\r\n\r\nexport default firebase\r\n"]},"metadata":{},"sourceType":"module"}