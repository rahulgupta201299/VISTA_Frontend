{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web_Page\\\\vista\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"D:\\\\Web_Page\\\\vista\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:\\\\Web_Page\\\\vista\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useRef,useEffect,useState}from'react';import{useLocation,Switch,Redirect,withRouter}from'react-router-dom';import{connect}from'react-redux';import AppRoute from'./utils/AppRoute';import ScrollReveal from'./utils/ScrollReveal';import ReactGA from'react-ga';import About from'./my_components/About/About';import Header from'./components/layout/Header';import Contact from'./my_components/Contact/Contact';import{setCurrentUser,createDB}from'./my_components/redux/user/user-actions';import{setVerify,setID,setTimeOut,Email}from'./my_components/redux/userError/userError-actions';import Payment from'./my_components/PaymentGateway/Payment';import Profile from'./my_components/Profile/Profile';import InfoBulletin from'./my_components/InfoBulletin/InfoBulletin';// Layouts\nimport LayoutDefault from'./layouts/LayoutDefault';import swal from'sweetalert';// Views \nimport Home from'./views/Home';import Signin from'./my_components/Signin/Signin';import{auth,firestore}from'./my_components/Firebase/FirebaseSTUD';// Initialize Google Analytics\nReactGA.initialize(process.env.REACT_APP_GA_CODE);var trackPage=function trackPage(page){ReactGA.set({page:page});ReactGA.pageview(page);};var App=function App(_ref){var dispatch=_ref.dispatch,currentUser=_ref.currentUser,timeout=_ref.timeout,userAs=_ref.userAs,ID=_ref.ID,history=_ref.history;var childRef=useRef();var location=useLocation();useEffect(function(){var page=location.pathname;document.body.classList.add('is-loaded');childRef.current.init();trackPage(page);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[location]);useEffect(function(){var username=userAs;auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userAuth){if(auth.currentUser.emailVerified){firestore.doc(\"\".concat(username,\"/\").concat(ID)).onSnapshot(function(snapshot){dispatch(setCurrentUser(_objectSpread({id:snapshot.id},snapshot.data())));});dispatch(setVerify(false));dispatch(Email(auth.currentUser.email));}else{auth.currentUser.sendEmailVerification();auth.signOut();dispatch(setID(\"abcd\"));dispatch(setVerify(true));dispatch(Email('abcd'));}}else dispatch(setCurrentUser(userAuth));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());},[]);/* useEffect(()=>{\r\n      auth.onAuthStateChanged(async userAuth=>{\r\n        if(userAuth){\r\n          if(auth.currentUser.emailVerified){\r\n            var today=new Date()\r\n            var hour=parseInt(today.getHours())\r\n            var newHour=0\r\n            if(timeout==-1) newHour=hour+2\r\n            else newHour=timeout+2\r\n            if(newHour>=24) newHour-=24\r\n            if(newHour>=12) newHour-=12\r\n            if(hour>=12) hour-=12\r\n            if(newHour<=hour){\r\n              swal(\"TimeOut Error!\", \" Please Login Again\", \"warning\").then(res=>{\r\n                window.location.reload()\r\n              })\r\n              auth.signOut()\r\n              dispatch(setID(\"abcd\"))\r\n              dispatch(Email('abcd'))\r\n              dispatch(setTimeOut(-1))\r\n              history.push('/signup')\r\n            }\r\n            else{\r\n              console.log(\"yesssssssssssssssssssssss\",hour,\" \",newHour)\r\n              dispatch(setTimeOut(hour))\r\n            }\r\n          }\r\n        }\r\n      })\r\n  },[])*/return/*#__PURE__*/React.createElement(ScrollReveal,{ref:childRef,children:function children(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{navPosition:\"right\",className:\"reveal-from-bottom\"}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/\",component:Home,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/about\",component:About,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/contact\",component:Contact,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/signup\",component:Signin,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/profile\",component:Profile,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/checkout\",component:Payment,layout:LayoutDefault}),/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/bulletin\",component:InfoBulletin,layout:LayoutDefault})));}});};var mapStateToProps=function mapStateToProps(state){return{currentUser:state.user.currentUser,createData:state.user.createData,userAs:state.userError.userAs,ID:state.userError.userID,timeout:state.userError.timeout};};export default withRouter(connect(mapStateToProps,null)(App));/*\r\nconst userRef=await createUserProfileDocument(userAuth)\r\n\r\n          userRef.onSnapshot(snapshot=>{\r\n            setCurrentUser({\r\n                id: snapshot.id,\r\n                ...snapshot.data()\r\n          })\r\n        })\r\n        */","map":{"version":3,"sources":["D:/Web_Page/vista/Frontend/src/App.js"],"names":["React","useRef","useEffect","useState","useLocation","Switch","Redirect","withRouter","connect","AppRoute","ScrollReveal","ReactGA","About","Header","Contact","setCurrentUser","createDB","setVerify","setID","setTimeOut","Email","Payment","Profile","InfoBulletin","LayoutDefault","swal","Home","Signin","auth","firestore","initialize","process","env","REACT_APP_GA_CODE","trackPage","page","set","pageview","App","dispatch","currentUser","timeout","userAs","ID","history","childRef","location","pathname","document","body","classList","add","current","init","username","onAuthStateChanged","userAuth","emailVerified","doc","onSnapshot","snapshot","id","data","email","sendEmailVerification","signOut","mapStateToProps","state","user","createData","userError","userID"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect,useState } from 'react';\r\nimport { useLocation, Switch,Redirect, withRouter } from 'react-router-dom';\r\nimport {connect} from'react-redux'\r\nimport AppRoute from './utils/AppRoute';\r\nimport ScrollReveal from './utils/ScrollReveal';\r\nimport ReactGA from 'react-ga';\r\nimport About from './my_components/About/About'\r\nimport Header from './components/layout/Header'\r\nimport Contact from './my_components/Contact/Contact'\r\nimport {setCurrentUser,createDB} from './my_components/redux/user/user-actions'\r\nimport {setVerify,setID,setTimeOut,Email} from './my_components/redux/userError/userError-actions'\r\nimport Payment from './my_components/PaymentGateway/Payment'\r\nimport Profile from './my_components/Profile/Profile'\r\nimport InfoBulletin from './my_components/InfoBulletin/InfoBulletin'\r\n// Layouts\r\nimport LayoutDefault from './layouts/LayoutDefault'\r\nimport swal from 'sweetalert'\r\n\r\n// Views \r\nimport Home from './views/Home';\r\nimport Signin from './my_components/Signin/Signin';\r\nimport { auth, firestore } from './my_components/Firebase/FirebaseSTUD';\r\n\r\n// Initialize Google Analytics\r\nReactGA.initialize(process.env.REACT_APP_GA_CODE);\r\n\r\nconst trackPage = page => {\r\n  ReactGA.set({ page });\r\n  ReactGA.pageview(page);\r\n};\r\n\r\nconst App = ({dispatch,currentUser,timeout,userAs,ID,history}) => {\r\n  const childRef = useRef();\r\n  let location = useLocation();\r\n  useEffect(() => {\r\n    const page = location.pathname;\r\n    document.body.classList.add('is-loaded')\r\n    childRef.current.init();\r\n    trackPage(page);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [location]);\r\n\r\n  useEffect(()=>{\r\n    var username=userAs\r\n    auth.onAuthStateChanged(async userAuth=>{\r\n      if(userAuth){\r\n        if(auth.currentUser.emailVerified){\r\n            firestore.doc(`${username}/${ID}`).onSnapshot(snapshot=>{\r\n              dispatch(setCurrentUser({\r\n                id: snapshot.id,\r\n                ...snapshot.data()\r\n              }))\r\n            })\r\n            dispatch(setVerify(false))\r\n            dispatch(Email(auth.currentUser.email))\r\n        }\r\n        else{\r\n          auth.currentUser.sendEmailVerification()\r\n          auth.signOut()\r\n          dispatch(setID(\"abcd\"))\r\n          dispatch(setVerify(true))\r\n          dispatch(Email('abcd'))\r\n        }\r\n      }\r\n      else dispatch(setCurrentUser(userAuth))\r\n  })\r\n  },[])\r\n /* useEffect(()=>{\r\n      auth.onAuthStateChanged(async userAuth=>{\r\n        if(userAuth){\r\n          if(auth.currentUser.emailVerified){\r\n            var today=new Date()\r\n            var hour=parseInt(today.getHours())\r\n            var newHour=0\r\n            if(timeout==-1) newHour=hour+2\r\n            else newHour=timeout+2\r\n            if(newHour>=24) newHour-=24\r\n            if(newHour>=12) newHour-=12\r\n            if(hour>=12) hour-=12\r\n            if(newHour<=hour){\r\n              swal(\"TimeOut Error!\", \" Please Login Again\", \"warning\").then(res=>{\r\n                window.location.reload()\r\n              })\r\n              auth.signOut()\r\n              dispatch(setID(\"abcd\"))\r\n              dispatch(Email('abcd'))\r\n              dispatch(setTimeOut(-1))\r\n              history.push('/signup')\r\n            }\r\n            else{\r\n              console.log(\"yesssssssssssssssssssssss\",hour,\" \",newHour)\r\n              dispatch(setTimeOut(hour))\r\n            }\r\n          }\r\n        }\r\n      })\r\n  },[])*/\r\n  return (\r\n    <ScrollReveal\r\n      ref={childRef}\r\n      children={() => (\r\n        <>\r\n        <Header navPosition=\"right\" className=\"reveal-from-bottom\" />\r\n        <Switch>\r\n          <AppRoute exact path=\"/\" component={Home} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/about\" component={About} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/contact\" component={Contact} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/signup\" component={Signin} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/profile\" component={Profile} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/checkout\" component={Payment} layout={LayoutDefault} />\r\n          <AppRoute exact path=\"/bulletin\" component={InfoBulletin} layout={LayoutDefault} />\r\n        </Switch>\r\n        </>\r\n      )} />\r\n  );\r\n}\r\n\r\n\r\nconst mapStateToProps=(state)=>({\r\n  currentUser: state.user.currentUser,\r\n  createData: state.user.createData,\r\n  userAs: state.userError.userAs,\r\n  ID: state.userError.userID,\r\n  timeout: state.userError.timeout\r\n})\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps,null)(App))\r\n\r\n/*\r\nconst userRef=await createUserProfileDocument(userAuth)\r\n\r\n          userRef.onSnapshot(snapshot=>{\r\n            setCurrentUser({\r\n                id: snapshot.id,\r\n                ...snapshot.data()\r\n          })\r\n        })\r\n        */\r\n"]},"metadata":{},"sourceType":"module"}